#TODO: not complete
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix ont: <http://ontologies.vub.be/oecd#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
<#DossierTriplesMap>
    rr:logicalTable [ rr:sqlQuery "SELECT ROWNUM() AS ID, * FROM oecd_411" ] ;

    rr:subjectMap [
        rr:template "http://toxin.vub.be/resource/dossier/{DOSSIER}" ;
        rr:class ont:Report ;
    ] ;

    rr:predicateObjectMap [
        rr:predicate ont:contains ;
        rr:objectMap [ 
            rr:parentTriplesMap <#TestTriplesMap> ; 
            rr:joinCondition [ rr:child "ID" ; rr:parent "ID" ; ] ;
        ] ;
    ] ;

    rr:predicateObjectMap [
        rr:predicate rdfs:label ;
        rr:objectMap [ rr:column "DOSSIER" ; ] ;
    ] ;

     rr:predicateObjectMap [
        rr:predicate ont:guideline ;
        rr:objectMap [ rr:column "GUIDELINE" ; ] ;
    ] ; 


    rr:predicateObjectMap [
        rr:predicate rdfs:seeAlso ;
        rr:objectMap [ rr:column "\"pdf link\"" ; rr:termType rr:IRI ; ] ;
    ] ;
.

<#CompoundTriplesMap>
    rr:logicalTable [ rr:sqlQuery "SELECT ROWNUM() AS ID, * FROM oecd_411" ] ;

    rr:subjectMap [
        rr:template "http://toxin.vub.be/resource/compound/{DOSSIER}" ;
        rr:class ont:Compound ;
    ] ;

    rr:predicateObjectMap [
        rr:predicate rdfs:label ;
        rr:objectMap [ rr:column "DOSSIER" ; ] ;
    ] ;

    rr:predicateObjectMap [
        rr:predicate ont:compoundOf ;
        rr:objectMap [ 
            rr:parentTriplesMap <#DossierTriplesMap> ; 
            rr:joinCondition [ rr:child "ID" ; rr:parent "ID" ; ] ;
        ] ;
    ] ;
.

<#TestTriplesMap>

    rr:logicalTable [ rr:sqlQuery "SELECT ROWNUM() AS ID, * FROM oecd_411" ] ;
  
     rr:predicateObjectMap [
        rr:predicate ont:guideline ;
        rr:objectMap [ rr:column "\"GUIDELINE\"" ; ] ;
    ] ; 

    rr:subjectMap [
        rr:template "http://toxin.vub.be/resource/test/repeated-dose-toxicity/{ID}" ;
        rr:class ont:Test ;
    ] ;

     rr:predicateObjectMap [
        rr:predicate ont:type ;
        rr:objectMap [ rr:column "\"TYPE\"" ; ] ;
    ] ; 

    ### BEGIN LINK WITH COMPOUND
    rr:predicateObjectMap [
        rr:predicate ont:compound ;
        rr:objectMap [ 
            rr:parentTriplesMap <#CompoundTriplesMap> ; 
            rr:joinCondition [ rr:child "ID" ; rr:parent "ID" ; ] ;
        ] ;
    ] ;
    ### END LINK WITH COMPOUND

   rr:predicateObjectMap [
        rr:predicate ont:clinical_observation ;
        rr:objectMap [ rr:column "changes in skin, fur, eyes, mucous membranes" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:total_differential_leucocyte ;
        rr:objectMap [ rr:column "total and differential leucocyte \"Leukocytes\"[Mesh] count" ; ] ;
    ] ; 
    
   rr:predicateObjectMap [
        rr:predicate ont:haematocrit;
        rr:objectMap [ rr:column "haematocrit \"Hematocrit\"[Mesh]" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:observation_autonomic_central_nervous_system;
        rr:objectMap [ rr:column "autonomic and central nervous system" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:observation_behaviour_pattern;
        rr:objectMap [ rr:column "behaviour pattern" ; ] ;
    ] ; 
   rr:predicateObjectMap [
        rr:predicate ont:prothrombine_time ;
        rr:objectMap [ rr:column "prothrombine time" ; ] ;
    ] ; 
   rr:predicateObjectMap [
        rr:predicate ont:observation_organ_weight_organ_body_weight ;
        rr:objectMap [ rr:column "organ weight and organ/body weight" ; ] ;
    ] ; 
   rr:predicateObjectMap [
        rr:predicate ont:observation_respiratory ;
        rr:objectMap [ rr:column "RESPIRATORY" ; ] ;
    ] ; 
   rr:predicateObjectMap [
        rr:predicate ont:changes_skin_fur_eyes_mucous_membranes ;
        rr:objectMap [ rr:column "changes in skin, fur, eyes, mucous membranes" ; ] ;
    ] ; 
   rr:predicateObjectMap [
        rr:predicate ont:haematocrit ;
        rr:objectMap [ rr:column "haematocrit \"Hematocrit\"[Mesh]" ; ] ;
    ] ; 
   rr:predicateObjectMap [
        rr:predicate ont:erythrocyte_count ;
        rr:objectMap [ rr:column "erythrocyte count \"Erythrocyte Count\"[Mesh]" ; ] ;
    ] ; 
    
   rr:predicateObjectMap [
        rr:predicate ont:erythrocyte_count ;
        rr:objectMap [ rr:column "erythrocyte count \"Erythrocyte Count\"[Mesh]" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:observation_circulatory ;
        rr:objectMap [ rr:column "CIRCULATORY" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:platelet_count ;
        rr:objectMap [ rr:column "platelet count \"Platelet Count\"[Mesh]" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:thromboplastin_time ;
        rr:objectMap [ rr:column "thromboplastin time" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:haemoglobin_concentration ;
        rr:objectMap [ rr:column "haemoglobin concentration" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:sodium ;
        rr:objectMap [ rr:column "sodium \"Sodium\"[Mesh]" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:potassium ;
        rr:objectMap [ rr:column "potassium \"Potassium\"[Mesh]" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:observation_somatomotor_activity;
        rr:objectMap [ rr:column "somatomotor activity" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:observation_ophtalmological_examination ;
        rr:objectMap [ rr:column "ophtalmological examination" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:food_water_consumption ;
        rr:objectMap [ rr:column "food/water consumption" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:creatinine ;
        rr:objectMap [ rr:column "creatinine \"Creatinine\"[Mesh]" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:total_protein ;
        rr:objectMap [ rr:column "total protein \"Proteins\"[Mesh]" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:albumin ;
        rr:objectMap [ rr:column "albumin \"Albumins\"[Mesh]" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:alanine_aminotransferase ;
        rr:objectMap [ rr:column "alanine aminotransferase \"D-Alanine Transaminase\"[Mesh]" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:aspartate_aminotransferase ;
        rr:objectMap [ rr:column "aspartate aminotransferase \"Aspartate Aminotransferases\"[Mesh]" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:observation_somatomotor_activity;
        rr:objectMap [ rr:column "somatomotor activity" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:clotting_time ;
        rr:objectMap [ rr:column "clotting time" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:gamma_glutamyl_transpeptidase ;
        rr:objectMap [ rr:column "gamma glutamyl transpeptidase \"gamma-Glutamyltransferase\"[Mesh]" ; ] ;
    ] ; 

   rr:predicateObjectMap [
        rr:predicate ont:gamma_glutamyl_transpeptidase ;
        rr:objectMap [ rr:column "gamma glutamyl transpeptidase \"gamma-Glutamyltransferase\"[Mesh]" ; ] ;
    ] ; 

    # AH
   rr:predicateObjectMap [
        rr:predicate ont:observation_other_signs_of_toxicity ;
        rr:objectMap [ rr:column "other signs of toxicity" ; ] ;
    ] ; 

# <#SPECIESTriplesMap>
#     # todo: \"type of study ( in vivo, in vitro, in silico, in chemico\" -> camelcase
#     rr:logicalTable [ rr:sqlQuery """
#             WITH RECURSIVE SPECIES (ID, SPECIES, REST) AS 
# 			( 
# 				SELECT 
#                     ID, 
#                     NULL, 
#                     SPECIES || ',' 
#                 FROM (  SELECT 
#                             ROWNUM() AS ID, 
#                             \"species/strain\" AS SPECIES 
#                         FROM REPEATEDTOXICITY WHERE \"species/strain\" IS NOT NULL
#                 ) 
# 				UNION ALL 
# 				SELECT 
#                     ID, 
#                     TRIM(SUBSTR(REST, 0, INSTR(REST, ',') - 1)), 
#                     SUBSTR(REST, INSTR(REST, ',') + 1) 
#                 FROM SPECIES WHERE REST <> '' 
# 			) SELECT DISTINCT * FROM SPECIES
#     """ ] ;

#     rr:subjectMap [
#         rr:template "http://toxin.vub.be/resource/species/{SPECIES}" ;
#         rr:class ont:Species ;
#     ] ;

#     # rr:predicateObjectMap [
#     #     # CLEANUP ONTOLOGY, NORMALIZE WITH IRIS
#     #     rr:predicate ont:species_strain ;
#     #     rr:objectMap [ rr:column "\"species/strain\"" ; ] ;
#     # ] ; 

#     rr:predicateObjectMap [
#         rr:predicate rdfs:label ;
#         rr:objectMap [ rr:column "SPECIES" ; ] ;
#     ] ; 

# .